___TERMS_OF_SERVICE___

By creating or modifying this file you agree to Google Tag Manager's Community
Template Gallery Developer Terms of Service available at
https://developers.google.com/tag-manager/gallery-tos (or such other URL as
Google may provide), as modified from time to time.


___INFO___

{
  "type": "TAG",
  "id": "cvt_temp_public_id",
  "version": 1,
  "securityGroups": [],
  "displayName": "Digiseg Insights Platform",
  "brand": {
    "id": "brand_dummy",
    "displayName": "",
    "thumbnail": "data:image/png;base64,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\u003d"
  },
  "categories": ["ANALYTICS", "CONVERSIONS"],
  "description": "Easily set up Digiseg insights in GTM. Track page views or actions with a single template—just add your Study ID and choose what to measure",
  "containerContexts": [
    "WEB"
  ]
}


___TEMPLATE_PARAMETERS___

[
  {
    "type": "TEXT",
    "name": "studyId",
    "displayName": "Study Id",
    "simpleValueType": true
  },
  {
    "type": "RADIO",
    "name": "measurementType",
    "displayName": "What do you want to measure?",
    "radioItems": [
      {
        "value": "pageview",
        "displayValue": "Page view (impression)"
      },
      {
        "value": "action",
        "displayValue": "Action (click/submit/conversion)"
      }
    ],
    "simpleValueType": true
  }
]


___SANDBOXED_JS_FOR_WEB_TEMPLATE___

const sendPixel = require('sendPixel');
const logToConsole = require('logToConsole');

const id = (data.studyId || '').trim();
if (!id) {
  logToConsole('Digiseg: Missing Study ID');
  data.gtmOnFailure();
  return;
}

// Switch URL based on radio choice
const type = data.measurementType === 'action' ? 'action' : 'pageview';

let url;
if (type === 'action') {
  url = 'https://data02.digiseg.net/1/' + id + '/action';
} else {
  url = 'https://data02.digiseg.net/1/' + id + '/pix.gif';
}

sendPixel(
  url,
  function () { data.gtmOnSuccess(); },
  function () { data.gtmOnFailure(); }
);


___WEB_PERMISSIONS___

[
  {
    "instance": {
      "key": {
        "publicId": "logging",
        "versionId": "1"
      },
      "param": [
        {
          "key": "environments",
          "value": {
            "type": 1,
            "string": "debug"
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  },
  {
    "instance": {
      "key": {
        "publicId": "send_pixel",
        "versionId": "1"
      },
      "param": [
        {
          "key": "allowedUrls",
          "value": {
            "type": 1,
            "string": "specific"
          }
        },
        {
          "key": "urls",
          "value": {
            "type": 2,
            "listItem": [
              {
                "type": 1,
                "string": "https://data02.digiseg.net/*"
              }
            ]
          }
        }
      ]
    },
    "clientAnnotations": {
      "isEditedByUser": true
    },
    "isRequired": true
  }
]


___TESTS___

scenarios: []


___NOTES___

Created on 03/09/2025, 15:47:29


